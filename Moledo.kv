# kivy 2.1.0
# kivymd 1.1.1
#: import MDFillRoundFlatButton kivymd.uix.button
#: import MDTextField kivymd.uix.textfield
#: import MDRaisedButton kivymd.uix.button
#: import MDIconButton kivymd.uix.button

MyScreenManager:

    MainScreen:
    RecipeScreen:
    CalculationScreen:
    IngredientChoosingScreen:
    IngredientAmountChoosingScreen:

<MainScreen>:
    name: 'Main'

    #Colors
    princeton_orange: (0.9 , 0.466 , 0.125 , 1)
    eerie_black: (0.1 , 0.1 , 0.1 , 1)
    blond: (1 , 0.96 , 0.698 , 1)
    dark_red: (0.58 , 0.105 , 0.05 , 1)
    battleship_grey: (0.518 , 0.55 , 0.555 , 1)


    BoxLayout:
        orientation: 'vertical'

        canvas:

            Color:
                rgba: root.princeton_orange

            Rectangle:
                pos: 0 , root.top-root.top/8
                size: root.width , root.top/8

            Color:
                rgba: root.blond

            Rectangle:
                size: root.width , root.top/8*7

        Label:
            size_hint: 1 , 1
            text: 'Moledo'
            color: root.eerie_black
            font_size: root.top/10
            pos: 0 , root.top

        BoxLayout:
            orientation: 'vertical'
            size_hint_y: 7

            CenterLayout:
                MDFillRoundFlatButton:
                    text: 'Retseptid'
                    font_size: self.size[0]*self.size[1]/1300
                    md_bg_color: root.eerie_black
                    on_release: app.root.current = 'Recipe'
                    size_hint: 0.4 , 0.5

            CenterLayout:
                MDFillRoundFlatButton:
                    text: 'Eine sobivus'
                    font_size: self.size[0]*self.size[1]/1300
                    md_bg_color: root.eerie_black
                    on_release: app.root.current = 'Calculation'
                    size_hint: 0.4 , 0.5

            CenterLayout:
                MDFillRoundFlatButton:
                    text: 'Allergia hoiatused'
                    font_size: self.size[0]*self.size[1]/1300
                    md_bg_color: root.eerie_black
                    on_release: #app.root.current = 'Recipe'
                    size_hint: 0.4 , 0.5

<RecipeScreen>:
    name: 'Recipe'
    heighty: self.height

    #Colors
    princeton_orange: (0.9 , 0.466 , 0.125 , 1)
    eerie_black: (0.1 , 0.1 , 0.1 , 1)
    blond: (1 , 0.96 , 0.698 , 1)
    dark_red: (0.58 , 0.105 , 0.05 , 1)
    battleship_grey: (0.518 , 0.55 , 0.555 , 1)

    BoxLayout:
        orientation: 'vertical'

        canvas:

            Color:
                rgba: root.princeton_orange

            Rectangle:
                pos: 0 , root.top-root.top/8
                size: root.width , root.top/8

            Color:
                rgba: root.blond

            Rectangle:
                size: root.width , root.top/8*7

        AnchorLayout:
            anchor_x: 'left'
            anchor_y: 'top'

            Label:
                text: 'Retseptid'
                color: root.eerie_black
                font_size: root.height/10

            MDIconButton:
                icon: 'arrow-left-thick'
                icon_size: sp(root.height/12)
                halign: 'center'
                valign: 'center'
                size_hint: 0.07 , 1
                on_release: app.root.current = 'Main'

        BoxLayout:
            orientation:'vertical'
            size_hint_y: 7

            RecipeScrollView:
                do_scroll_x: False
                do_scroll_y: True
                height: recipe_list.height
                scroll_wheel_distance: dp(69)
                smooth_scroll_end: 5

                RecipeList:
                    id: recipe_list
                    cols: 1
                    size_hint: 1, None
                    height: self.minimum_height

<CalculationScreen>:
    name: 'Calculation'

    #Colors
    princeton_orange: (0.9 , 0.466 , 0.125 , 1)
    eerie_black: (0.1 , 0.1 , 0.1 , 1)
    blond: (1 , 0.96 , 0.698 , 1)
    dark_red: (0.58 , 0.105 , 0.05 , 1)
    battleship_grey: (0.518 , 0.55 , 0.555 , 1)

    BoxLayout:
        orientation: 'vertical'

        canvas:

            Color:
                rgba: root.princeton_orange

            Rectangle:
                pos: 0 , root.top-root.top/8
                size: root.width , root.top/8

            Color:
                rgba: root.blond

            Rectangle:
                size: root.width , root.top/8*7

        AnchorLayout:
            anchor_x: 'left'
            anchor_y: 'top'

            Label:
                text: 'Eine sobivus'
                color: root.eerie_black
                font_size: root.height/10

            MDIconButton:
                icon: 'arrow-left-thick'
                icon_size: sp(root.height/12)
                halign: 'center'
                valign: 'center'
                size_hint: 0.07 , 1
                on_release: app.root.current = 'Main'

        BoxLayout:
            orientation: 'vertical'
            size_hint_y: 7

            CenterLayout:
                MDFillRoundFlatButton:
                    text: 'Vali koostisosad'
                    text_color: 'white'
                    md_bg_color: root.eerie_black
                    font_size: 100
                    size_hint: 0.45 , 0.35
                    on_release: app.root.current = 'Ingredient Choosing'

            CenterLayout:
                MDFillRoundFlatButton:
                    text: 'Vali kogused'
                    text_color: 'white'
                    md_bg_color: root.eerie_black
                    font_size: 100
                    size_hint: 0.45 , 0.35
                    on_release: app.root.current = 'Ingredient Amount Choosing'

<IngredientChoosingScreen>:
    name: 'Ingredient Choosing'
    on_enter: self.add_table()
    on_pre_enter: self.add_return_button()

    CenterLayout:
        id: table_area


<IngredientAmountChoosingScreen>:
    name: 'Ingredient Amount Choosing'
    on_pre_enter: self.add_rows()
    on_pre_enter: self.add_return_button()

    ScrollView:
        do_scroll_x: False
        do_scroll_y: True
        scroll_wheel_distance: dp(69)
        smooth_scroll_end: 5
        height: ingredient_list.minimum_height

        IngredientList:
            id: ingredient_list
            cols: 2
            size_hint: 1, None
            height: self.minimum_height
